parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"H99C":[function(require,module,exports) {
function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}throw new TypeError(e(t)+" is not iterable")}function n(){var e,t,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.toStringTag||"@@toStringTag";function i(n,o,a,c){var i=o&&o.prototype instanceof l?o:l,f=Object.create(i.prototype);return r(f,"_invoke",function(n,r,o){var a,c,i,l=0,f=o||[],s=!1,d={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(t,n){return a=t,c=0,i=e,d.n=n,u}};function v(n,r){for(c=n,i=r,t=0;!s&&l&&!o&&t<f.length;t++){var o,a=f[t],v=d.p,p=a[2];n>3?(o=p===r)&&(i=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=v&&((o=n<2&&v<a[1])?(c=0,d.v=r,d.n=a[1]):v<p&&(o=n<3||a[0]>r||r>p)&&(a[4]=n,a[5]=r,d.n=p,c=0))}if(o||n>1)return u;throw s=!0,r}return function(o,f,p){if(l>1)throw TypeError("Generator is already running");for(s&&1===f&&v(f,p),c=f,i=p;(t=c<2?e:i)||!s;){a||(c?c<3?(c>1&&(d.n=-1),v(c,i)):d.n=i:d.v=i);try{if(l=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(s=d.n<0)?i:n.call(r,d))!==u)break}catch(t){a=e,c=1,i=t}finally{l=1}}return{value:t,done:s}}}(n,a,c),!0),f}var u={};function l(){}function f(){}function s(){}t=Object.getPrototypeOf;var d=[][a]?t(t([][a]())):(r(t={},a,function(){return this}),t),v=s.prototype=l.prototype=Object.create(d);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,r(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e}return f.prototype=s,r(v,"constructor",s),r(s,"constructor",f),f.displayName="GeneratorFunction",r(s,c,"GeneratorFunction"),r(v),r(v,c,"Generator"),r(v,a,function(){return this}),r(v,"toString",function(){return"[object Generator]"}),(n=function(){return{w:i,m:p}})()}function r(e,t,n,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(r=function(e,t,n,o){function c(t,n){r(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,o)}function o(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var c=e.apply(t,n);function i(e){o(c,r,a,i,u,"next",e)}function u(e){o(c,r,a,i,u,"throw",e)}i(void 0)})}}var c=!1,i=!1,u=null,l={},f=null,s=document.querySelector("#logs"),d=document.querySelector("#lottie-player"),v=document.querySelector("#lottie-player").player,p=document.querySelector("#sprites"),m=document.querySelector("#load"),h=document.querySelector("#convert"),y=document.querySelector("#download"),b=document.querySelector("#sprite-name"),g=document.querySelector("#lottieUrl"),w=document.querySelector("#width"),S=document.querySelector("#height"),L=document.querySelector("#scale"),E=document.querySelector("#o-width"),q=document.querySelector("#o-height"),k=document.querySelector("#o-fps"),j=document.querySelector("#fps"),C=document.querySelector("#o-frames"),O=document.querySelector("#frames"),x=document.querySelector("#preview"),F=function(e){var t=document.createElement("p");t.innerText=e,s.appendChild(t),s.scrollTop=s.scrollHeight},R=function(e){var t=new Image;return new Promise(function(n,r){t.onload=function(e){return n(t)},t.onerror=r,t.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(e)})},U=function(e,t){var n={};if(e===t)for(var r=0;r<t;r++)n[r]=r;else if(e>t)for(var o=e/t,a=0;a<t;a++){var c=Math.floor(a*o);n[a]=Math.min(c,e-1)}else for(var i=t/e,u=0;u<t;u++){var l=Math.floor(u/i);n[u]=Math.min(l,e-1)}return n},M=function(){var e=a(n().m(function e(){var r,o;return n().w(function(e){for(;;)switch(e.n){case 0:if(Object.values(l).forEach(function(e){return URL.revokeObjectURL(e)}),l={},x.style.display="none",f&&(clearInterval(f),f=null),!c){e.n=1;break}return i=!0,c=!1,h.textContent="Convert to Sprite",e.a(2);case 1:p.innerHTML="",c=!0,i=!1,h.textContent="Cancel Conversion",F("Set sprite dimensions..."),r=d.player,o=function(){var e=a(n().m(function e(){var a,s;return n().w(function(e){for(;;)switch(e.n){case 0:r.stop(),r.setLoop(!1),a=n().m(function e(t){var o;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!i){e.n=1;break}return c=!1,e.a(2,1);case 1:return F("Rendering frame #".concat(t," from frame #").concat(u.frameMapping[t],"...")),r.setFrame(u.frameMapping[t]),e.p=2,e.n=3,new Promise(function(e,n){d.toBlob(function(r){if(r){var o=URL.createObjectURL(r),a=document.createElement("img");a.src=o,a.style.width="100px",a.style.height="100px",a.style.border="1px solid red",a.style.margin="2px",a.style.cursor="pointer",a.title="Frame ".concat(t," - Click to download"),a.className="sprite-frame",a.dataset.frame=t,a.addEventListener("click",function(){var e=b.value||"sprite",n=document.createElement("a");n.href=o,n.download="".concat(e,"_").concat(t,".png"),document.body.appendChild(n),n.click(),document.body.removeChild(n),a.remove()}),p.appendChild(a),F("Frame ".concat(t,": Created blob URI and img element")),l[t]=o,e()}else F("Frame ".concat(t,": Failed to create blob")),n()},"image/png")});case 3:e.n=5;break;case 4:e.p=4,o=e.v,F("Frame ".concat(t," error: ").concat(o.toString()));case 5:return e.a(2)}},e,null,[[2,4]])}),s=0;case 1:if(!(s<u.newFrames)){e.n=4;break}return e.d(t(a(s)),2);case 2:if(!e.v){e.n=3;break}return e.a(3,4);case 3:s++,e.n=1;break;case 4:F("Done!"),r.removeEventListener("load",o),c=!1,h.textContent="Convert to Sprite",r.setLoop(!0),r.setFrame(0),r.play(),f=function(){var e=0;x.src=l[0];var t=1e3/j.value;return F("Preview interval: ".concat(t,"ms")),setInterval(function(){e=(e+1)%u.newFrames,x.src=l[e]},t)}(),x.style.display="block",x.width=w.value,x.height=S.value;case 5:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),r.addEventListener("load",o),F("Startng animation..."),y.disabled=!1,r.load({autoplay:!1,loop:!1,src:u.url});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),P=function(){var e=a(n().m(function e(t){var r,o;return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fetch(t);case 1:return r=e.v,e.n=2,r.json();case 2:o=e.v,u={url:t,height:o.h,width:o.w,frames:o.op-o.ip+1,newFrames:o.op-o.ip+1,frameMapping:U(o.op-o.ip+1,o.op-o.ip+1),fps:o.fr};case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}();m&&m.addEventListener("click",a(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return F("Loading ".concat(g.value)),e.n=1,P(g.value);case 1:d.player.load({autoplay:!0,loop:!0,src:g.value}),i=!1,h.disabled=!1,y.disabled=!0,E.value=u.width,q.value=u.height,w.value=u.width,S.value=u.height,d.width=u.width,d.height=u.height,d.player.resize(),L.value=1,k.value=u.fps,j.value=u.fps,C.value=u.frames,O.value=u.frames,Object.values(l).forEach(function(e){return URL.revokeObjectURL(e)}),l={},x.style.display="none",f&&(clearInterval(f),f=null);case 2:return e.a(2)}},e)}))),g&&g.addEventListener("change",function(){var e;h.disabled=(null===(e=u)||void 0===e?void 0:e.url)!==g.value}),h&&h.addEventListener("click",function(){M()}),L&&L.addEventListener("change",function(){var e=u.width*L.value,t=u.height*L.value;d.width=e,d.height=t,d.player.resize(),w.value=e,S.value=t}),w&&w.addEventListener("change",function(){var e=w.value/u.width,t=u.height*e;L.value=e,S.value=t,d.width=w.value,d.height=t,d.player.resize()}),S&&S.addEventListener("change",function(){var e=S.value/u.height,t=u.width*e;L.value=e,w.value=t,d.width=t,d.height=S.value,d.player.resize()}),j&&j.addEventListener("change",function(){var e=u.frames/u.fps,t=Math.floor(e*j.value),n=U(u.frames,t);O.value=t,u.newFrames=t,u.frameMapping=n}),y&&y.addEventListener("click",a(n().m(function e(){var t,r;return n().w(function(e){for(;;)switch(e.n){case 0:return t=new JSZip,r=Array.from(document.querySelectorAll(".sprite-frame")),e.n=1,Promise.all(r.map(function(e){return fetch(e.src).then(function(e){return e.blob()}).then(function(n){t.file("".concat(b.value,"_").concat(e.dataset.frame,".png"),n)})}));case 1:t.generateAsync({type:"blob"}).then(function(e){var t=document.createElement("a");t.href=URL.createObjectURL(e),t.download="".concat(b.value,".zip"),document.body.appendChild(t),t.click(),document.body.removeChild(t)});case 2:return e.a(2)}},e)})));
},{}]},{},["H99C"], null)
//# sourceMappingURL=/src.28bcb41c.js.map