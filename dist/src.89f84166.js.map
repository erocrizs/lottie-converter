{"version":3,"sources":["src/index.js"],"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","return","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","converting","cancelled","lottieDetails","logContainer","document","querySelector","playerCanvas","player","sprites","btnLoad","btnConvert","btnDownload","inputSpriteName","inputLottieUrl","inputWidth","inputHeight","inputScale","inputOWidth","inputOHeight","inputOFps","inputFps","inputOFrames","inputFrames","log","message","msgElem","createElement","innerText","appendChild","scrollTop","scrollHeight","loadAsImage","markup","img","Image","res","rej","onload","onerror","src","encodeURIComponent","frameMapping","sourceFrames","targetFrames","mapping","step","sourceFrame","Math","floor","min","convert","_ref","_callee2","_listener","_context3","textContent","innerHTML","listener","_ref2","_callee","_loop","_context2","stop","setLoop","_t","_context","concat","setFrame","reject","toBlob","blob","url","URL","createObjectURL","style","width","height","border","margin","cursor","title","className","dataset","frame","addEventListener","spriteName","link","href","download","body","click","removeChild","remove","revokeObjectURL","toString","newFrames","_regeneratorValues","removeEventListener","play","disabled","load","autoplay","loop","getLottieDetails","_ref3","_callee3","result","json","_context4","fetch","h","frames","op","ip","fps","fr","_x","_callee4","_context5","resize","_lottieDetails","newWidth","newHeight","newScale","duration","newFrameCount","_callee5","zip","_context6","JSZip","Array","from","querySelectorAll","all","map","sprite","response","file","generateAsync","type","content"],"mappings":"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","file":"src.89f84166.js","sourceRoot":"..","sourcesContent":["let converting = false;\r\nlet cancelled = false;\r\nlet lottieDetails = null;\r\n\r\nconst logContainer = document.querySelector(\"#logs\");\r\nconst playerCanvas = document.querySelector(\"#lottie-player\");\r\nconst player = document.querySelector(\"#lottie-player\").player;\r\nconst sprites = document.querySelector(\"#sprites\");\r\nconst btnLoad = document.querySelector(\"#load\");\r\nconst btnConvert = document.querySelector(\"#convert\");\r\nconst btnDownload = document.querySelector(\"#download\");\r\nconst inputSpriteName = document.querySelector(\"#sprite-name\");\r\nconst inputLottieUrl = document.querySelector(\"#lottieUrl\");\r\nconst inputWidth = document.querySelector(\"#width\");\r\nconst inputHeight = document.querySelector(\"#height\");\r\nconst inputScale = document.querySelector(\"#scale\");\r\nconst inputOWidth = document.querySelector(\"#o-width\");\r\nconst inputOHeight = document.querySelector(\"#o-height\");\r\nconst inputOFps = document.querySelector(\"#o-fps\");\r\nconst inputFps = document.querySelector(\"#fps\");\r\nconst inputOFrames = document.querySelector(\"#o-frames\");\r\nconst inputFrames = document.querySelector(\"#frames\");\r\n\r\nconst log = message => {\r\n  const msgElem = document.createElement(\"p\");\r\n  msgElem.innerText = message;\r\n  logContainer.appendChild(msgElem);\r\n  logContainer.scrollTop = logContainer.scrollHeight;\r\n};\r\n\r\nconst loadAsImage = markup => {\r\n  const img = new Image();\r\n  return new Promise((res, rej) => {\r\n    img.onload = e => res(img);\r\n    img.onerror = rej;\r\n    img.src = \"data:image/svg+xml;charset=utf-8,\" + encodeURIComponent(markup);\r\n  });\r\n};\r\n\r\nconst frameMapping = (sourceFrames, targetFrames) => {\r\n  const mapping = {};\r\n\r\n  if (sourceFrames === targetFrames) {\r\n    // Direct 1:1 mapping\r\n    for (let i = 0; i < targetFrames; i++) {\r\n      mapping[i] = i;\r\n    }\r\n  } else if (sourceFrames > targetFrames) {\r\n    const step = sourceFrames / targetFrames;\r\n    for (let i = 0; i < targetFrames; i++) {\r\n      const sourceFrame = Math.floor(i * step);\r\n      mapping[i] = Math.min(sourceFrame, sourceFrames - 1);\r\n    }\r\n  } else {\r\n    const step = targetFrames / sourceFrames;\r\n    for (let i = 0; i < targetFrames; i++) {\r\n      const sourceFrame = Math.floor(i / step);\r\n      mapping[i] = Math.min(sourceFrame, sourceFrames - 1);\r\n    }\r\n  }\r\n  \r\n  return mapping;\r\n}\r\n\r\nconst convert = async () => {\r\n  if (converting) {\r\n    cancelled = true;\r\n    converting = false;\r\n    btnConvert.textContent = 'Convert to Sprite';\r\n    return;\r\n  }\r\n\r\n  sprites.innerHTML = '';\r\n  converting = true;\r\n  cancelled = false;\r\n  btnConvert.textContent = 'Cancel Conversion';\r\n\r\n  log(`Set sprite dimensions...`);\r\n\r\n  let player = playerCanvas.player\r\n  const listener = async () => {\r\n    player.stop();\r\n    player.setLoop(false);\r\n\r\n    for (let f = 0; f < lottieDetails.newFrames; f++) {\r\n      if (cancelled) {\r\n        converting = false;\r\n        break;\r\n      }\r\n\r\n      log(`Rendering frame #${f} from frame #${lottieDetails.frameMapping[f]}...`);\r\n      player.setFrame(lottieDetails.frameMapping[f]);\r\n      // await new Promise(resolve => setTimeout(() => resolve(), 1000));\r\n\r\n      try {\r\n        // Test: Get frame as blob URI and create img element\r\n        await new Promise((resolve, reject) => {\r\n          playerCanvas.toBlob((blob) => {\r\n            if (blob) {\r\n              const url = URL.createObjectURL(blob);\r\n              const img = document.createElement('img');\r\n              img.src = url;\r\n              img.style.width = '100px';\r\n              img.style.height = '100px';\r\n              img.style.border = '1px solid red';\r\n              img.style.margin = '2px';\r\n              img.style.cursor = 'pointer';\r\n              img.title = `Frame ${f} - Click to download`;\r\n              img.className = 'sprite-frame';\r\n              img.dataset.frame = f;\r\n              \r\n              // Add click handler to download the image\r\n              img.addEventListener('click', () => {\r\n                const spriteName = inputSpriteName.value || 'sprite';\r\n                const link = document.createElement('a');\r\n                link.href = url;\r\n                link.download = `${spriteName}_${f}.png`;\r\n                document.body.appendChild(link);\r\n                link.click();\r\n                document.body.removeChild(link);\r\n                \r\n                // Remove the image after download\r\n                img.remove();\r\n                URL.revokeObjectURL(url);\r\n              });\r\n              sprites.appendChild(img);\r\n              log(`Frame ${f}: Created blob URI and img element`);\r\n              resolve();\r\n            } else {\r\n              log(`Frame ${f}: Failed to create blob`);\r\n              reject();\r\n            }\r\n          }, 'image/png');\r\n        });\r\n      } catch (e) {\r\n        log(`Frame ${f} error: ${e.toString()}`)\r\n      }\r\n    }\r\n\r\n    log(`Done!`);\r\n    player.removeEventListener(\"load\", listener);\r\n    converting = false;\r\n    btnConvert.textContent = 'Convert to Sprite';\r\n    player.setLoop(true);\r\n    player.setFrame(0);\r\n    player.play();\r\n  }\r\n\r\n  // Load into player\r\n  player.addEventListener(\"load\", listener);\r\n\r\n  log(`Startng animation...`);\r\n  btnDownload.disabled = false;\r\n  player.load({\r\n    autoplay: false,\r\n    loop: false,\r\n    src: lottieDetails.url,\r\n  });\r\n};\r\n\r\nconst getLottieDetails = async url => {\r\n  const result = await fetch(url);\r\n  const json = await result.json();\r\n\r\n  lottieDetails = {\r\n    url,\r\n    height: json.h,\r\n    width: json.w,\r\n    frames: json.op - json.ip + 1,\r\n    newFrames: json.op - json.ip + 1,\r\n    frameMapping: frameMapping(json.op - json.ip + 1, json.op - json.ip + 1),\r\n    fps: json.fr\r\n  };\r\n};\r\n\r\nif (btnLoad) {\r\n  btnLoad.addEventListener(\"click\", async () => {\r\n    log(`Loading ${inputLottieUrl.value}`);\r\n    await getLottieDetails(inputLottieUrl.value);\r\n    playerCanvas.player.load({\r\n      autoplay: true,\r\n      loop: true,\r\n      src: inputLottieUrl.value,\r\n    });\r\n\r\n    cancelled = false;\r\n    btnConvert.disabled = false;\r\n    btnDownload.disabled = true;\r\n    inputOWidth.value = lottieDetails.width;\r\n    inputOHeight.value = lottieDetails.height;\r\n    inputWidth.value = lottieDetails.width;\r\n    inputHeight.value = lottieDetails.height;\r\n    playerCanvas.width = lottieDetails.width;\r\n    playerCanvas.height = lottieDetails.height;\r\n    playerCanvas.player.resize();\r\n    inputScale.value = 1;\r\n    inputOFps.value = lottieDetails.fps;\r\n    inputFps.value = lottieDetails.fps;\r\n    inputOFrames.value = lottieDetails.frames;\r\n    inputFrames.value = lottieDetails.frames;\r\n  });\r\n}\r\n\r\nif (inputLottieUrl) {\r\n  inputLottieUrl.addEventListener(\"change\", () => {\r\n    btnConvert.disabled = lottieDetails?.url !== inputLottieUrl.value;\r\n  });\r\n}\r\n\r\nif (btnConvert) {\r\n  btnConvert.addEventListener(\"click\", () => {\r\n    convert();\r\n  });\r\n}\r\n\r\nif (inputScale) {\r\n  inputScale.addEventListener(\"change\", () => {\r\n    const newWidth = lottieDetails.width * inputScale.value;\r\n    const newHeight = lottieDetails.height * inputScale.value;\r\n    \r\n    playerCanvas.width = newWidth;\r\n    playerCanvas.height = newHeight;\r\n    playerCanvas.player.resize();\r\n    \r\n    inputWidth.value = newWidth;\r\n    inputHeight.value = newHeight;\r\n  });\r\n}\r\n\r\nif (inputWidth) {\r\n  inputWidth.addEventListener(\"change\", () => {\r\n    const newScale = inputWidth.value / lottieDetails.width;\r\n    const newHeight = lottieDetails.height * newScale;\r\n    \r\n    inputScale.value = newScale;\r\n    inputHeight.value = newHeight;\r\n    \r\n    playerCanvas.width = inputWidth.value;\r\n    playerCanvas.height = newHeight;\r\n    playerCanvas.player.resize();\r\n  });\r\n}\r\n\r\nif (inputHeight) {\r\n  inputHeight.addEventListener(\"change\", () => {\r\n    const newScale = inputHeight.value / lottieDetails.height;\r\n    const newWidth = lottieDetails.width * newScale;\r\n    \r\n    inputScale.value = newScale;\r\n    inputWidth.value = newWidth;\r\n    \r\n    playerCanvas.width = newWidth;\r\n    playerCanvas.height = inputHeight.value;\r\n    playerCanvas.player.resize();\r\n  });\r\n}\r\n\r\nif (inputFps) {\r\n  inputFps.addEventListener(\"change\", () => {\r\n    const duration = lottieDetails.frames / lottieDetails.fps;\r\n    const newFrameCount = Math.floor(duration * inputFps.value);\r\n    const newFrames = frameMapping(lottieDetails.frames, newFrameCount);\r\n    inputFrames.value = newFrameCount;\r\n    lottieDetails.newFrames = newFrameCount;\r\n    lottieDetails.frameMapping = newFrames;\r\n  });\r\n}\r\n\r\nif (btnDownload) {\r\n  btnDownload.addEventListener(\"click\", async () => {\r\n    const zip = new JSZip();\r\n    const sprites = Array.from(document.querySelectorAll(\".sprite-frame\"));\r\n    await Promise.all(sprites.map(sprite => {\r\n      return fetch(sprite.src)\r\n        .then(response => response.blob())\r\n        .then(blob => {\r\n          zip.file(`${inputSpriteName.value}_${sprite.dataset.frame}.png`, blob);\r\n        });\r\n    }));\r\n    zip.generateAsync({ type: \"blob\" }).then(content => {\r\n      const link = document.createElement(\"a\");\r\n      link.href = URL.createObjectURL(content);\r\n      link.download = `${inputSpriteName.value}.zip`;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n    });\r\n  });\r\n}"]}